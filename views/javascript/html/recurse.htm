<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" Content="text/html; charset=gb2312">
<TITLE>递归</TITLE>
<!--CSS_START-->
<style>@import url(../html-vss/msdnie4a.css);</style>
<link disabled rel="stylesheet" href="../html-vss/msdn_ie3.css">
<!--CSS_END-->
</HEAD>
<BODY>


<!--Start Head-->
<TABLE class="banner" width="100%" CELLSPACING=0>
<TR>
<TD class="bannerleft" nowrap>JScript&nbsp;</TD>
<TD class="bannerright" nowrap><a href="../html-vss/jsTOC.htm">语言参考</a></TD>
</TR>
</TABLE>
<HR>
<!--End Head-->

<H1><A NAME="recurse"></A>递归</H1>

<P>递归是一种重要的编程技术。该方法用于让一个函数从其内部调用其自身。一个示例就是计算阶乘。0 的阶乘被特别地定义为 1。 更大数的阶乘是通过计算 1 * 2 * ...来求得的，每次增加 1，直至达到要计算其阶乘的那个数。</P>

<P>下面的段落是用文字定义的计算阶乘的一个函数。</P>

<P>“如果这个数小于零，则拒绝接收。如果不是一个整数，则将其向下舍入为相邻的整数。如果这个数为 0，则其阶乘为 1。如果这个数大于 0，则将其与相邻较小的数的阶乘相乘。”</P>

<P>要计算任何大于 0 的数的阶乘，至少需要计算一个其他数的阶乘。用来实现这个功能的函数就是已经位于其中的函数；该函数在执行当前的这个数之前，必须调用它本身来计算相邻的较小数的阶乘。这就是一个递归示例。</P>

<P>递归和迭代（循环）是密切相关的 — 能用递归处理的算法也都可以采用迭代，反之亦然。确定的算法通常可以用几种方法实现，您只需选择最自然贴切的方法，或者您觉得用起来最轻松的一种即可。</P>

<P>显然，这样有可能会出现问题。可以很容易地创建一个递归函数，但该函数不能得到一个确定的结果，并且不能达到一个终点。这样的递归将导致计算机执行一个“无限”循环。下面就是一个示例：在计算阶乘的文字描述中遗漏了第一条规则（对负数的处理） ，并试图计算任何负数的阶乘。这将导致失败，因为按顺序计算 -24 的阶乘时，首先不得不计算 -25 的阶乘；然而这样又不得不计算 -26 的阶乘；如此继续。很明显，这样永远也不会到达一个终止点。</P>

<P>因此在设计递归函数时应特别仔细。如果怀疑其中存在着无限递归的可能，则可以让该函数记录它调用自身的次数。如果该函数调用自身的次数太多，即使您已决定了它应调用多少次，就自动退出。</P>

<P>下面仍然是阶乘函数，这次是用 JScript 代码编写的。 </P>

<PRE><CODE>// </CODE>计算阶乘的函数。如果传递了
<CODE>// </CODE>无效的数值（例如小于零），
<CODE>// </CODE>将返回<CODE> -1</CODE>，表明发生了错误。若数值有效，
<CODE>// </CODE>把数值转换为最相近的整数，并
<CODE>// </CODE>返回阶乘。
<CODE>function factorial(aNumber)  {</CODE>
<CODE>aNumber = Math.floor(aNumber);  // </CODE>如果这个数不是一个整数，则向下舍入。
<CODE>if (aNumber &lt; 0)  {  // </CODE>如果这个数小于<CODE> 0</CODE>，拒绝接收。
<CODE>    return -1;</CODE>
<CODE>    }</CODE>
<CODE>      if (aNumber == 0)  {  // </CODE>如果为<CODE> 0</CODE>，则其阶乘为<CODE> 1</CODE>。
<CODE>      return 1;</CODE>
<CODE>      }</CODE>
<CODE>        else return (aNumber * factorial(aNumber - 1));  // </CODE>否则，递归直至完成。
}</PRE>
<!--Copyright_START-->
<DIV CLASS="footer">
<HR><a href="jscopy.htm">&copy; 2000 Microsoft Corporation 版权所有。保留所有权利。使用规定。</a><br>
</DIV> <!--Copyright_END-->

</BODY>
</HTML>
